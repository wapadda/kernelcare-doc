(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{233:function(e,t,r){"use strict";r.r(t);var s=r(0),a=Object(s.a)({},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content"},[e._m(0),e._v(" "),e._m(1),e._v(" "),r("p",[e._v("This article explains how to disable or enable SMT (Simultaneous multithreading) without rebooting using KernelCare, to help mitigate the recent MDS/Zombieload vulnerability.")]),e._v(" "),r("p",[e._v("Disabling CPU simultaneous multithreading (SMT) is one of the mitigations needed to counter the recent MDS vulnerability (also known as ‘Zombieload’). There is a performance impact that depends on the configuration of the hosting platform and its workload patterns. You should also consider the impact of other mitigation strategies, such as assigning dedicated cores to guests (e.g. VMs).")]),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),e._m(4),e._v(" "),e._m(5),e._m(6),r("p",[e._v("As soon as you have these files in place, it is possible to proceed with disabling SMT.")]),e._v(" "),r("iframe",{attrs:{width:"560",height:"315",src:"https://www.youtube.com/embed/RUGCvEO1hAE",frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}}),e._v(" "),e._m(7),e._v(" "),e._m(8),e._v(" "),r("p",[e._v("This file lets you enable or disable SMT, and shows its state. There are three values:")]),e._v(" "),e._m(9),e._v(" "),e._m(10),e._v(" "),e._m(11),e._v(" "),r("p",[e._v("The contents of this file show the status of SMT (e.g. if two or more sibling threads are active on the same physical core the contents of this file is 1, if not: 0).")]),e._v(" "),r("p",[e._v("Here are some commands to control SMT support (root permissions are required):")]),e._v(" "),e._m(12),e._v(" "),e._m(13),e._m(14),e._v(" "),e._m(15),e._m(16),e._v(" "),e._m(17),r("p",[e._v("Disabling SMT, "),r("router-link",{attrs:{to:"/how_to's/#how-to-update-microcode-without-reboot-with-vendor-provided-package"}},[e._v("updating microcode")]),e._v(", and applying KernelCare patches will protect your systems against the ZombieLoad vulnerability. Note, only the latter action is applicable to virtual systems (e.g. VMs, VPS and other cloud instance types).")],1),e._v(" "),e._m(18),e._v(" "),r("p",[e._v("A video example can be seen "),r("a",{attrs:{href:"https://asciinema.org/a/zZYA3INITh59ObzSGp9OeLCdn",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),r("OutboundLink")],1),e._v(".")]),e._v(" "),e._m(19),e._v(" "),r("p",[e._v("This article shows how to update the microcode of Intel CPUs running Linux.")]),e._v(" "),e._m(20),e._v(" "),e._m(21),e._v(" "),e._m(22),e._v(" "),r("ul",[r("li",[r("router-link",{attrs:{to:"/how_to's/#updating-microcode-on-ubuntu-and-debian"}},[e._v("Updating microcode on Ubuntu and Debian")])],1),e._v(" "),r("li",[r("router-link",{attrs:{to:"/how_to's/#updating-microcode-on-red-hat-and-centos"}},[e._v("Updating microcode on Red Hat Enterprise Linux (and derivatives)")])],1),e._v(" "),r("li",[r("router-link",{attrs:{to:"/how_to's/#updating-microcode-on-centos-6"}},[e._v("Updating Microcode on CentOS 6")])],1)]),e._v(" "),r("div",{staticClass:"tip custom-block"},[r("p",{staticClass:"custom-block-title"},[e._v("Notes")]),e._v(" "),r("ul",[r("li",[e._v("These steps must be done as root.")]),e._v(" "),r("li",[e._v("The examples shown are for Debian. ("),r("a",{attrs:{href:"https://asciinema.org/a/pWVQb2xR2K65B9TAfWwgvhOvG",target:"_blank",rel:"noopener noreferrer"}},[e._v("Click here"),r("OutboundLink")],1),e._v(" for a video example on Debian 9.)")]),e._v(" "),e._m(23)])]),e._v(" "),e._m(24),e._v(" "),r("ol",[r("li",[r("p",[e._v("Find the microcode package download link for your platform")]),e._v(" "),r("ul",[r("li",[e._v("Ubuntu: "),r("a",{attrs:{href:"https://usn.ubuntu.com/3977-1/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://usn.ubuntu.com/3977-1/"),r("OutboundLink")],1)]),e._v(" "),r("li",[e._v("Debian: "),r("a",{attrs:{href:"https://packages.debian.org/search?keywords=intel-microcode",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://packages.debian.org/search?keywords=intel-microcode"),r("OutboundLink")],1)])])]),e._v(" "),e._m(25)]),e._v(" "),e._m(26),e._v(" "),e._m(27),e._m(28),e._v(" "),e._m(29),r("p",[e._v("A list of checksums is on "),r("a",{attrs:{href:"https://packages.debian.org/stretch/amd64/intel-microcode/download",target:"_blank",rel:"noopener noreferrer"}},[e._v("the Debian packages download page"),r("OutboundLink")],1),e._v(".")]),e._v(" "),e._m(30),e._v(" "),e._m(31),e._m(32),e._v(" "),e._m(33),e._m(34),e._v(" "),e._m(35),e._m(36),e._v(" "),e._m(37),e._m(38),e._v(" "),e._m(39),e._m(40),e._v(" "),e._m(41),e._m(42),e._v(" "),e._m(43),e._m(44),e._v(" "),e._m(45),e._m(46),e._v(" "),e._m(47),e._m(48),e._v(" "),e._m(49),e._m(50),e._v(" "),e._m(51),e._v(" "),e._m(52),e._v(" "),e._m(53),e._m(54),e._v(" "),e._m(55),e._v(" "),e._m(56),e._m(57),e._v(" "),e._m(58),e._m(59),e._v(" "),e._m(60),e._m(61),e._v(" "),e._m(62),e._m(63),e._v(" "),e._m(64),e._m(65),e._v(" "),e._m(66),e._v(" "),e._m(67),e._m(68),e._v(" "),e._m(69),r("p",[e._v("you need to install the package manually.")]),e._v(" "),e._m(70),e._v(" "),e._m(71),r("p",[e._v("The command output:")]),e._v(" "),e._m(72),e._m(73),e._v(" "),e._m(74),e._m(75),e._v(" "),e._m(76),r("p",[e._v("If you see the output:")]),e._v(" "),e._m(77),r("p",[e._v("You need to load driver microcode.")]),e._v(" "),e._m(78),e._v(" "),e._m(79),e._m(80),e._v(" "),e._m(81),r("p",[e._v("If you see the output:")]),e._v(" "),e._m(82),r("p",[e._v("then update is successful.")]),e._v(" "),e._m(83),e._v(" "),e._m(84),r("iframe",{attrs:{width:"560",height:"315",src:"https://www.youtube.com/embed/EydWy-b9uns",frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})])},[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"how-to-s"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#how-to-s","aria-hidden":"true"}},[this._v("#")]),this._v(" How-To's")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"how-to-disable-hyperthreading-smt-without-reboot-kernelcare-case"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#how-to-disable-hyperthreading-smt-without-reboot-kernelcare-case","aria-hidden":"true"}},[this._v("#")]),this._v(" How to disable HyperThreading (SMT) without reboot: KernelCare case")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("You can control and get the status of SMT with the kernel’s "),t("code",[this._v("sysfs")]),this._v(" interface. There are two files, both in the "),t("code",[this._v("/sys/devices/system/cpu/smt")]),this._v(" directory:")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[t("code",[this._v("control")])]),this._v(" "),t("li",[t("code",[this._v("active")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("If you cannot find the "),t("code",[this._v("/sys/devices/system/cpu/smt")]),this._v(" directory, this means your running kernel does not support SMT. In this case, you need to apply KernelCare patches so the SMT controls become available to your system. Use the "),t("code",[this._v("kcarectrl")]),this._v(" command:")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("kcarectl --update\nKernel is safe\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("ls -l /sys/devices/system/cpu/smt\n-r--r--r-- 1 root root 4096 May 17 13:06 active\n-rw-r--r-- 1 root root 4096 May 17 13:06 control\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"smt-control"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#smt-control","aria-hidden":"true"}},[this._v("#")]),this._v(" SMT Control")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("code",[this._v("/sys/devices/system/cpu/smt/control")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ol",[r("li",[r("code",[e._v("on")]),e._v(": The CPU supports SMT and it is enabled. All logical CPUs can be taken offline or online without restriction.")]),e._v(" "),r("li",[r("code",[e._v("off")]),e._v(": The CPU supports SMT but it is disabled. Only so-called primary SMT threads can be taken offline/online without restriction. Attempts to put a non-primary sibling thread online will be rejected.")]),e._v(" "),r("li",[r("code",[e._v("notsupported")]),e._v(": The CPU does not support SMT. You will not be able to write to the control file.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"smt-status"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#smt-status","aria-hidden":"true"}},[this._v("#")]),this._v(" SMT Status")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("code",[this._v("/sys/devices/system/cpu/smt/active")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"check-the-smt-state"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#check-the-smt-state","aria-hidden":"true"}},[this._v("#")]),this._v(" Check the SMT state")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("cat /sys/devices/system/cpu/smt/active\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"enable-smt"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#enable-smt","aria-hidden":"true"}},[this._v("#")]),this._v(" Enable SMT")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("echo on > /sys/devices/system/cpu/smt/control\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"disable-smt"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#disable-smt","aria-hidden":"true"}},[this._v("#")]),this._v(" Disable SMT")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("echo off > /sys/devices/system/cpu/smt/control\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"example"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#example","aria-hidden":"true"}},[this._v("#")]),this._v(" Example")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"how-to-update-microcode-without-reboot-with-vendor-provided-package"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#how-to-update-microcode-without-reboot-with-vendor-provided-package","aria-hidden":"true"}},[this._v("#")]),this._v(" How to update Microcode without reboot with vendor-provided package")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"warning custom-block"},[t("p",{staticClass:"custom-block-title"},[this._v("Warning")]),this._v(" "),t("p",[this._v("To avoid possible issues with Microcode updating, enable SMT before the update.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tip custom-block"},[t("p",{staticClass:"custom-block-title"},[this._v("Note")]),this._v(" "),t("p",[this._v("This article is subject to change and will be updated with instructions for other distributions.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("Contents:")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[this._v("If you have doubts your systems are fully protected against CPU- and kernel-related vulnerabilities, please "),t("a",{attrs:{href:"mailto:sales@cloudlinux.com"}},[this._v("get in touch with us")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"updating-microcode-on-ubuntu-and-debian"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#updating-microcode-on-ubuntu-and-debian","aria-hidden":"true"}},[this._v("#")]),this._v(" Updating microcode on Ubuntu and Debian")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("p",[this._v("Download the package")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tip custom-block"},[t("p",{staticClass:"custom-block-title"},[this._v("Note")]),this._v(" "),t("p",[this._v("Example shown for Debian 9")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("cd <a temporary directory, e.g. /tmp>\nmkdir firmware\ncd firmware\nwget http://security.debian.org/debian-security/pool/updates/non-free/i/intel-microcode/intel-microcode_3.20190514.1~deb9u1_amd64.deb\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"3"}},[t("li",[this._v("Check the downloaded package")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("md5sum intel-microcode_3.20190514.1~deb9u1_amd64.deb\nc7bc9728634137453e0f4821fb6bb436  intel-microcode_3.20190514.1~deb9u1_amd64.deb\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"4"}},[t("li",[this._v("Unpack the package")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("dpkg -x intel-microcode_3.20190514.1~deb9u1_amd64.deb\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"5"}},[t("li",[this._v("Check the unpacked files")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("ls -l\ntotal 1896\ndrwxr-xr-x 5 root root   53 May 15 04:18 etc\n-rw-r--r-- 1 root root 1940140 May 17 11:42 intel-microcode_3.20190514.1~deb9u1_amd64.deb\ndrwxr-xr-x 3 root root   22 May 15 04:18 lib\ndrwxr-xr-x 3 root root   19 May 15 04:18 usr\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"6"}},[t("li",[this._v("Create a backup of existing microcode:")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("test -d /lib/firmware/intel-ucode/ && mv /lib/firmware/intel-ucode/ /lib/firmware/intel-ucode.backup\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"7"}},[t("li",[this._v("Copy the new microcode and check it")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("cp -r lib/firmware/intel-ucode/ /lib/firmware/\nls -l /lib/firmware/ | grep intel-ucode\ndrwxr-xr-x  2 root root 4096 May 17 11:47 intel-ucode\ndrwxr-xr-x  2 root root 4096 May 16 20:54 intel-ucode.backup\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"8"}},[t("li",[this._v("Check the current microcode version")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("dmesg | grep microcode\n[ 2.254717] microcode: sig=0x306a9, pf=0x10, revision=0x12\n[ 2.254820] microcode: Microcode Update Driver: v2.01 <tigran@aivazian.fsnet.co.uk>, Peter Oruba\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"9"}},[t("li",[this._v("(Optional) Double check the current microcode versions (revisions per core)")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("cat /proc/cpuinfo | grep -e microcode\nmicrocode : 0x12\nmicrocode : 0x12\nmicrocode : 0x12\nmicrocode : 0x12\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"10"}},[t("li",[this._v("Check the microcode reload file exists")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("ls -l /sys/devices/system/cpu/microcode/reload\n--w------- 1 root root 4096 May 17 11:54 /sys/devices/system/cpu/microcode/reload\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"11"}},[t("li",[this._v("Force the kernel to load the new microcode")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("echo 1 > /sys/devices/system/cpu/microcode/reload\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"12"}},[t("li",[this._v("Check the new microcode")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("dmesg | grep microcode\n[ 2.254717] microcode: sig=0x306a9, pf=0x10, revision=0x12\n[ 2.254820] microcode: Microcode Update Driver: v2.01 <tigran@aivazian.fsnet.co.uk>, Peter Oruba\n[ 1483.494573] platform microcode: firmware: direct-loading firmware intel-ucode/06-3a-09\n[ 1483.495985] microcode: updated to revision 0x21, date = 2019-02-13\n[ 1483.496012] platform microcode: firmware: direct-loading firmware intel-ucode/06-3a-09\n[ 1483.496698] platform microcode: firmware: direct-loading firmware intel-ucode/06-3a-09\n[ 1483.497391] platform microcode: firmware: direct-loading firmware intel-ucode/06-3a-09\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"13"}},[t("li",[this._v("(Optional) Double check the new microcode version (revisions per core)")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("cat /proc/cpuinfo | grep -e microcode\nmicrocode : 0x21\nmicrocode : 0x21\nmicrocode : 0x21\nmicrocode : 0x21\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"updating-microcode-on-red-hat-and-centos"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#updating-microcode-on-red-hat-and-centos","aria-hidden":"true"}},[this._v("#")]),this._v(" Updating Microcode on Red Hat and CentOS")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("For RHEL-based distributions, you can use the "),t("code",[this._v("microcode_ctl utility")]),this._v(" to update microcode.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",[t("li",[this._v("Get the latest microcode by updating the "),t("code",[this._v("microcode_ctl")]),this._v(" package")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("yum update microcode_ctl\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"2"}},[t("li",[this._v("Create a force file")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Create a "),t("code",[this._v("force-late-intel–06–4f–01")]),this._v(" inside the firmware directory.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("touch /lib/firmware/`uname -r`/force-late-intel-06-4f-01\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"3"}},[t("li",[this._v("Run the microcode update")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("/usr/libexec/microcode_ctl/update_ucode\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"4"}},[t("li",[this._v("Force the kernel to load the new microcode")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("echo 1 > /sys/devices/system/cpu/microcode/reload\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"5"}},[t("li",[this._v("Check the new microcode")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("dmesg | grep microcode\n[ 2.254717] microcode: sig=0x306a9, pf=0x10, revision=0x12\n[ 2.254820] microcode: Microcode Update Driver: v2.01 <tigran@aivazian.fsnet.co.uk>, Peter Oruba\n[ 1483.494573] platform microcode: firmware: direct-loading firmware intel-ucode/06-3a-09\n[ 1483.495985] microcode: updated to revision 0x21, date = 2019-02-13\n[ 1483.496012] platform microcode: firmware: direct-loading firmware intel-ucode/06-3a-09\n[ 1483.496698] platform microcode: firmware: direct-loading firmware intel-ucode/06-3a-09\n[ 1483.497391] platform microcode: firmware: direct-loading firmware intel-ucode/06-3a-09\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"6"}},[t("li",[this._v("(Optional) Double check the new microcode version (revisions per core)")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("cat /proc/cpuinfo | grep -e microcode\nmicrocode : 0x21\nmicrocode : 0x21\nmicrocode : 0x21\nmicrocode : 0x21\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"updating-microcode-on-centos-6"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#updating-microcode-on-centos-6","aria-hidden":"true"}},[this._v("#")]),this._v(" Updating Microcode on CentOS 6")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",[t("li",[this._v("Get the latest microcode by updating the "),t("code",[this._v("microcode_ctl")]),this._v(" package")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("yum update microcode_ctl\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"2"}},[t("li",[this._v("If "),t("code",[this._v("yum update microcode_ctl")]),this._v(" outputs the following:")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("Package(s) microcode_ctl available, but not installed.\nNo Packages marked for Update\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"3"}},[t("li",[this._v("To install "),t("code",[this._v("microcode_ctl")]),this._v(" package, run the command:")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("yum install microcode_ctl\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("Installed:\n  microcode_ctl.x86_64 2:1.17-33.11.el6_10                                                                                                                                 \n\nComplete!\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"4"}},[t("li",[this._v("Check CPU microcode version:")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("cat /proc/cpuinfo | grep microcode\nmicrocode       : 9\nmicrocode       : 9\nmicrocode       : 9\nmicrocode       : 9\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"5"}},[t("li",[this._v("Try to update microcode")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("microcode_ctl -u\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("microcode_ctl: writing microcode (length: 2370560)\nmicrocode_ctl: cannot open /dev/cpu/microcode for writing errno=2 (No such file or directory)\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"6"}},[t("li",[this._v("Load driver microcode")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("modprobe microcode\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"7"}},[t("li",[this._v("Try to update microcode again:")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("microcode_ctl -u\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("microcode_ctl: writing microcode (length: 2370560)\nmicrocode_ctl: microcode successfully written to /dev/cpu/microcode\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"8"}},[t("li",[this._v("Check version:")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("cat /proc/cpuinfo | grep microcode\nmicrocode       : 17\nmicrocode       : 17\nmicrocode       : 17\nmicrocode       : 17\n")])])])}],!1,null,null,null);t.default=a.exports}}]);